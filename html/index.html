<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Download Image</title>
  </head>
  <body>
    <h1>Download Image from URL</h1>

    <button id="downloadBtn">Download Image</button>

    <script>
      const downloadBtn = document.getElementById("downloadBtn");

      downloadBtn.addEventListener("click", async () => {
        const fileUrl =
          "http://localhost:5000/uploads/65981d64-ca00-4619-bdbe-ace927567dbc.jpg";
        const fileName = fileUrl.split("/").pop();

        try {
          const response = await fetch(fileUrl);
          if (!response.ok) throw new Error("Network response was not ok");

          const blob = await response.blob();
          const url = URL.createObjectURL(blob);

          const a = document.createElement("a");
          a.href = url;
          a.download = fileName;
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
        } catch (err) {
          console.error("Download failed:", err);
        }
      });
    </script>
    <script src="./chatbot-widget.js"></script>
  </body>
</html>
